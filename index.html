<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Meta Media Hub ‚Äî Image Suite (Split Slider Annotator)</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="app-wrap">

  <header class="topbar">
    <div class="brand">
      <div class="logo">MM</div>
      <div>
        <h1 style="margin:0;font-size:18px">Meta Media Hub</h1>
        <div class="tagline">Internal image toolkit for META e-learning</div>
      </div>
    </div>
    <div class="right">
      <button id="themeBtn" class="about-btn" title="Choose Theme">üé®</button>
      <button id="aboutBtn" class="about-btn" title="About this tool">i</button>
      <button id="themeToggle" class="about-btn" title="Toggle theme">üåì</button>
      <span id="statusText" class="status">Locked</span>
    </div>
  </header>

  <!-- PASSWORD MODAL -->
  <div id="pwModal" class="modal">
    <div class="modal-panel pw-panel" style="max-width:380px">
      <h2>Enter Password</h2>
      <p class="small-muted">Unlock the Meta Media Hub</p>
      <input id="pwInput" class="input" type="password" placeholder="Password" style="width:100%;margin-top:8px"/>
      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="pwBtn" class="btn primary" style="flex:1">Unlock</button>
        <button id="pwClose" class="btn ghost" style="flex:0 0 auto">Close</button>
      </div>
      <p id="pwMsg" class="small-muted" style="color:#ff9090;margin-top:8px;min-height:18px"></p>
    </div>
  </div>

  <!-- simple ABOUT MODAL so aboutBtn JS never errors -->
  <div id="aboutModal" class="modal">
    <div class="modal-panel" style="max-width:420px">
      <h3 style="margin-top:0">About Meta Media Hub</h3>
      <p class="small-muted">
        Internal image toolkit for META e-learning. Features: AI enhancer, split slider,
        annotations (rect, arrow, highlight, blur, free-draw, text) and export.
      </p>
      <div style="text-align:right;margin-top:16px">
        <button id="closeAbout" class="btn ghost">Close</button>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <section id="home" class="home-section" style="display:none">
    <div class="tool-card panel" id="btnImage" title="Image tools">
      <div class="icon">üñºÔ∏è</div>
      <h3 style="margin:6px 0">Image Tools</h3>
      <p class="small-muted">Resize ‚Ä¢ Smart Center ‚Ä¢ Human Detection</p>
    </div>

    <div class="tool-card panel" id="btnEnhancer" title="AI enhancer">
      <div class="icon">‚ú®</div>
      <h3 style="margin:6px 0">AI Image Enhancer</h3>
      <p class="small-muted">Upscale ‚Ä¢ Sharpen ‚Ä¢ Denoise ‚Ä¢ HDR ‚Ä¢ Text clarity</p>
    </div>
  </section>

  <!-- ENHANCER SECTION -->
  <section id="enhancerSection" class="panel" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div>
        <h2 style="margin:0">AI Image Enhancer</h2>
        <div class="small-muted">Improve quality: upscale, denoise, HDR & text clarity ‚Äî in browser.</div>
      </div>
      <button id="backHomeFromEnhancer" class="btn ghost">‚Üê Home</button>
    </div>

    <div style="display:flex;gap:18px;align-items:flex-start">
      <div style="flex:1">
        <div class="panel" style="padding:12px">
          <h4 style="margin:0 0 8px 0">Upload Image</h4>
          <div id="dropEnhance" class="dropzone panel" style="cursor:pointer;padding:18px;text-align:center">
            Click or drag & drop a single image
          </div>
          <input id="enhanceInput" type="file" accept="image/*" style="display:none">
          <div id="enhFileInfo" class="small-muted" style="margin-top:8px">No image selected.</div>
          <div style="margin-top:8px" class="small-muted">
            Ideal for portraits, screenshots, thumbnails and hero images.
          </div>
        </div>
      </div>

      <div style="width:360px">
        <div class="panel" style="padding:12px">
          <h4 style="margin:0 0 8px 0">Enhancement Options</h4>
          <div style="display:flex;flex-direction:column;gap:8px">
            <label><input type="checkbox" id="enhUpscale2x"> Upscale √ó2</label>
            <label><input type="checkbox" id="enhUpscale4x"> Upscale √ó4</label>
            <label><input type="checkbox" id="enhFaceEnhance"> Boost Faces & Detail</label>
            <label><input type="checkbox" id="enhDenoise"> Denoise & Sharpen</label>
            <label><input type="checkbox" id="enhOCR"> Text / OCR Clarity</label>
            <label><input type="checkbox" id="enhHDR"> HDR Boost</label>
            <label><input type="checkbox" id="enhHide"> Object Hide / Privacy Blur</label>
          </div>

          <div class="toolbar-row" style="margin-top:12px">
            <button id="hideAreaBtn" class="btn ghost">Set Hide Area</button>
            <button id="openAnnotatorBtn" class="btn ghost">Annotate</button>
          </div>

          <div style="margin-top:12px;">
            <label class="small-muted">Output Quality <span id="enhQualityVal">92%</span></label>
            <input id="enhQuality" type="range" min="70" max="100" value="92" style="width:100%">
          </div>

          <div class="toolbar-row" style="margin-top:12px">
            <button id="enhPreviewBtn" class="btn ghost">Preview</button>
            <button id="enhRunBtn" class="btn primary">Enhance & Download</button>
          </div>

          <div id="enhStatus" class="small-muted" style="margin-top:8px">Waiting for image.</div>
        </div>
      </div>
    </div>

    <!-- SPLIT SLIDER PREVIEW -->
    <div class="split-wrap">
      <div class="split-labels"><span>Before</span><span class="right">After</span></div>

      <div id="splitContainer" class="split-container">
        <div class="split-before">
          <img id="beforeImg" src="/mnt/data/8f506879-2ddd-490a-be9e-4e894f4a52ab.png">
        </div>
        <!-- id changed to splitAfter to match JS -->
        <div id="splitAfter" class="split-after">
          <img id="afterImg" src="/mnt/data/8f506879-2ddd-490a-be9e-4e894f4a52ab.png">
        </div>

        <!-- annotation canvas: id changed to annoCanvas to match JS -->
        <canvas id="annoCanvas" class="annotation-canvas"></canvas>

        <!-- handle -->
        <div id="splitHandle" class="split-handle"><div class="bar"></div></div>
      </div>

      <!-- mini toolbar -->
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
        <div class="annotation-toolbar">
          <button class="btn ghost annot-btn" data-tool="rect">Rect</button>
          <button class="btn ghost annot-btn" data-tool="arrow">Arrow</button>
          <button class="btn ghost annot-btn" data-tool="text">Text</button>
          <button class="btn ghost annot-btn" data-tool="highlight">Highlight</button>
          <button class="btn ghost annot-btn" data-tool="blur">Blur</button>
          <button class="btn ghost annot-btn" data-tool="free">Free</button>
          <button id="annotUndo" class="btn ghost">Undo</button>
          <button id="annotClear" class="btn ghost">Clear</button>
        </div>

        <div>
          <button id="miniApply" class="btn primary">Apply ‚Üí After</button>
        </div>
      </div>
    </div>

  </section>

  <footer class="small-muted" style="text-align:center;margin-top:18px">
    Created by Mukesh Yadav ‚Ä¢ META E-learning Team
  </footer>
</div>

<!-- Annotator modal (ids adjusted to match JS expectations) -->
<div id="annotatorModal" class="modal">
  <div class="modal-panel">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3 style="margin:0">Full Annotator</h3>
      <div>
        <button id="annotClose" class="btn ghost">Cancel</button>
        <button id="annotApply" class="btn primary">Apply & Close</button>
      </div>
    </div>

    <div style="display:flex;gap:12px;margin-top:12px">
      <div style="width:240px">
        <div class="small-muted">Color</div>
        <input id="annotColor" type="color" value="#ff7a3c" style="margin-top:8px">
        <div class="small-muted" style="margin-top:8px">Size</div>
        <input id="annotSize" type="range" min="1" max="40" value="4" style="width:100%;margin-top:6px">
        <div style="margin-top:12px">
          <button id="annotZoomFit" class="btn ghost">Fit</button>
          <button id="annotZoom100" class="btn ghost">100%</button>
          <button id="annotClearAll" class="btn ghost">Clear All</button>
        </div>
      </div>
      <div style="flex:1;position:relative">
        <div id="annotFullWrap" style="height:560px;background:#111;border-radius:8px;overflow:hidden;position:relative">
          <img id="annotFullBase" src="/mnt/data/8f506879-2ddd-490a-be9e-4e894f4a52ab.png"
               style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain;pointer-events:none"/>
          <!-- canvas id changed to annotCanvasFull to match JS -->
          <canvas id="annotCanvasFull"
                  style="position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:auto"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script src="script_v.js"></script>
</body>
</html>
